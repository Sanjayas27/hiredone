<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WorkEase</title>
    <link rel="stylesheet" href="style.css">
    <script src="main.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Briem+Hand:wght@100..900&display=swap" rel="stylesheet">
</head>
<body>
    <div id="header1">
      
        <nav>
            <ul>
                <li>
                    <a href="index.html">Home</a>
                </li>
                <li>
                    <a href="#profile">My profile</a>
                </li>
                <li>
                    <a href="#signout" id="sign">Sign Out</a>
                </li>
            </ul>
        </nav>
        </div>
        <div class="box">
        <div id="text"><h1>Hire<span>On</span></h1></div>
        <div class="searchcontainer">
            <div class="autocomplete">
                <input type="text" id="myInput" placeholder="Type preffered job role...">
                <div class="autocomplete-items" id="myDropdown"></div>
            </div>
            <select id="stateSelect" onchange="populateDistricts()">
                <option disabled selected value="">Location</option>
              </select>
              <select id="districtSelect" disabled>
                <option disabled selected value="">Select a district</option>
                <!-- Options will be added dynamically using JavaScript -->
              </select>
            <button type="submit" onclick="searchEmployees()">Search</button>
          </div>
          <div id="searchResults">
          </div>
        </div>
          <script>
            // Simulated list of keywords
            const keywords = ["painting","electrician","plumber"];
            
            // Function to update the autocomplete dropdown
            function autocomplete(input, arr) {
                let currentFocus;
                input.addEventListener("input", function(e) {
                    let val = this.value;
                    closeAllLists();
                    if (!val) { return false; }
                    currentFocus = -1;
                    let matches = arr.filter(keyword => keyword.toLowerCase().includes(val.toLowerCase()));
                    let dropdown = document.getElementById("myDropdown");
                    matches.forEach(function(match) {
                        let item = document.createElement("div");
                        item.classList.add("autocomplete-item");
                        item.innerHTML = match;
                        item.addEventListener("click", function() {
                            input.value = this.innerHTML;
                            closeAllLists();
                        });
                        dropdown.appendChild(item);
                    });
                });
            
                function closeAllLists() {
                    let items = document.querySelectorAll(".autocomplete-item");
                    items.forEach(function(item) {
                        item.parentNode.removeChild(item);
                    });
                }
            
                document.addEventListener("click", function (e) {
                    closeAllLists();
                });
            }
            
            // Initialize autocomplete for the search bar
            autocomplete(document.getElementById("myInput"), keywords);
            </script>
  <script>
                const employees = [
  { name: 'Sidharth s kumar', job: 'painting', state: 'Kerala', district: 'pathanamthitta'},
  { name: 'Sonu', job: 'painting', state: 'Maharashtra', district: 'Mumbai'},
  { name: 'Kumar', job: 'painting', state: 'Delhi', district: 'New Delhi' },
  // Add more employee data as needed
];

function searchEmployees() {
  const job = document.getElementById('myInput').value.toLowerCase();
  const state = document.getElementById('stateSelect').value.toLowerCase();
  const district = document.getElementById('districtSelect').value.toLowerCase();

  const searchResults = employees.filter(employee => {
      return employee.job.toLowerCase().includes(job) &&
          employee.state.toLowerCase().includes(state) &&+
          employee.district.toLowerCase().includes(district);
  });

  displaySearchResults(searchResults);
}

function displaySearchResults(results) {
  const searchResultsContainer = document.getElementById('searchResults');
  searchResultsContainer.innerHTML = '';

  if (results.length === 0) {
      searchResultsContainer.innerHTML = '<p>No matching employees found.</p>';
  } else {
      results.forEach(employee => {
          const employeeElement = document.createElement('div');
          employeeElement.classList.add('employee');
          employeeElement.innerHTML = `
          <img src='https://firebasestorage.googleapis.com/v0/b/workease-39efc.appspot.com/o/bg2.png?alt=media&token=499fb008-e3c8-4c4e-9325-d209f7b4fac5'></img>
              <h3>${employee.name}</h3>
              <p1><strong>Job:</strong> ${employee.job}</p1> 
              <p2><strong>Rating:</strong>5*</p2>
              <p3>${employee.state},${employee.district}</p3> 
    
              `;

// Add event listener to open profile page on click
employeeElement.addEventListener('click', function() {
    // Pass employee details to the profile page using query parameters
    const queryParams = new URLSearchParams();
    queryParams.set('name', employee.name);
    queryParams.set('job', employee.job);
    queryParams.set('state', employee.state);
    queryParams.set('district', employee.district);
    window.location.href = 'profile.html';
});
          searchResultsContainer.appendChild(employeeElement);
      });
  }
}
</script>
</body>
</html>